{"componentChunkName":"component---src-templates-markdown-js","path":"/operators/continuous-deployment/docs/setup_argocd_dev_environment.md","result":{"data":{"site":{"siteMetadata":{"title":"Operate First"}},"markdownRemark":{"id":"9b6aace9-6fec-5f97-897b-3f681a0acf51","html":"<h1>Deploying a development environment</h1>\n<h2>Prequisites</h2>\n<ul class=\"pf-c-list\">\n<li>An OCP 4.x Development cluster</li>\n<li>Must have cluster admin (not kube:admin)</li>\n</ul>\n<h2>Instructions</h2>\n<p>Create the project <code class=\"language-text\">aicoe-argocd-dev</code> and <code class=\"language-text\">argocd-test</code>. The latter wll be used\nfor deploying a dev application via ArgoCD.</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">oc new-project argocd-test\noc new-project aicoe-argocd-dev</code></pre></div>\n<h3>Deploy ArgoCD</h3>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token function\">git</span> clone git@github.com:operate-first/continuous-deployment.git\n<span class=\"token builtin class-name\">cd</span> continuous-deployment\n\n<span class=\"token comment\"># Deploy Cluser objects</span>\nkustomize build manifests/crds --enable_alpha_plugins <span class=\"token operator\">|</span> oc apply -f -\n\n<span class=\"token comment\"># Deploy Non Cluster objects</span>\nkustomize build manifests/overlays/dev --enable_alpha_plugins <span class=\"token operator\">|</span> oc apply -f -</code></pre></div>\n<h2>Configure Auth</h2>\n<p>Once deployed, there are some additional configurations, run this script:</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">examples/configure_development.sh</code></pre></div>\n<p>The script needs to be run under a user with the cluster admin role, but not with <code class=\"language-text\">kube:admin</code>.</p>\n<p>Feel free to look inside the script for detailed comments on what configurations are applied.</p>\n<h2>Cleanup</h2>\n<p>Run the following commands to clean up your environment.</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">kustomize build manifests/overlays/dev --enable_alpha_plugins | oc delete -f -\nkustomize build manifests/crds --enable_alpha_plugins | oc delete -f -\noc delete group dev-group\noc delete project argocd-test\noc delete project aicoe-argocd-dev</code></pre></div>\n<p>You may ignore the following error when removing secrets:</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">Error from server (NotFound): error when deleting &quot;STDIN&quot;: secrets &quot;argocd-dex-server-oauth-token&quot; not found\nError from server (NotFound): error when deleting &quot;STDIN&quot;: secrets &quot;dev-cluster-spec&quot; not found</code></pre></div>","frontmatter":{"title":"","description":null}}},"pageContext":{"id":"9b6aace9-6fec-5f97-897b-3f681a0acf51"}},"staticQueryHashes":["117426894","3000541721"]}